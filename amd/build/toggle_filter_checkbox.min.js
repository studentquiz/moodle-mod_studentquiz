/**
 * Javascript to toggle filter checkbox.
 *
 * @module    mod_studentquiz/toggle_filter_checkbox
 * @copyright 2019 The Open University
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_studentquiz/toggle_filter_checkbox",["jquery","core/key_codes"],(function($,keyCodes){var t={SELECTOR:{TIME_EDT:{CALENDAR:"a[name='timecreated_edt[calendar]",SELECT_DAY_CALENDAR:"select[name='timecreated_edt[day]",INPUT:"input[name='timecreated_edt[enabled]']"},TIME_SDT:{CALENDAR:"a[name='timecreated_sdt[calendar]",SELECT_DAY_CALENDAR:"select[name='timecreated_sdt[day]",INPUT:"input[name='timecreated_sdt[enabled]']"}},dependencies:[],init:function(){var linkToggles=$("a.link-toggle");linkToggles.each((function(index,linkToggle){var link=$(linkToggle),disableElements=link.data("disableelements").split(",");for(index in disableElements){var disableId="id_"+disableElements[index];void 0===t.dependencies[disableId]&&(t.dependencies[disableId]=[]),t.dependencies[disableId].push($("#"+link.attr("for")))}})),linkToggles.click((function(e){e.preventDefault(),t.linkToggleHandler($(this))})).keypress((function(e){e.keyCode===keyCodes.space&&(e.preventDefault(),t.linkToggleHandler($(this)))})),t.initCalendarTabIndex()},linkToggleHandler:function(linkToggle){var checkbox=$(".toggle#"+linkToggle.attr("for")),toggle=!checkbox.prop("checked");checkbox.prop("checked",toggle);var data=linkToggle.data("disableelements");if(data.length>0){var index,disableElements=data.split(",");for(index in disableElements){var disableId="id_"+disableElements[index];!toggle&&t.checkDependOn(disableId)&&(toggle=!0),$("#"+disableId).attr("disabled",toggle)}}},checkDependOn:function(id){var index,dependOn=t.dependencies[id];for(index in dependOn)if(dependOn[index].prop("checked"))return!0;return!1},initCalendarTabIndex:function(){$(t.SELECTOR.TIME_SDT.INPUT).change((function(){var calendar=$(t.SELECTOR.TIME_SDT.CALENDAR),focus=$(t.SELECTOR.TIME_SDT.SELECT_DAY_CALENDAR),isCheck=$(this).is(":checked");t.toggleCalendarTabIndex(calendar,focus,isCheck)})),$(t.SELECTOR.TIME_EDT.INPUT).change((function(){var calendar=$(t.SELECTOR.TIME_EDT.CALENDAR),focus=$(t.SELECTOR.TIME_EDT.SELECT_DAY_CALENDAR),isCheck=$(this).is(":checked");t.toggleCalendarTabIndex(calendar,focus,isCheck)}))},toggleCalendarTabIndex:function(calendar,focusElement,isCheck){isCheck?(calendar.removeAttr("tabindex"),focusElement.focus()):calendar.attr("tabindex",-1)}};return t}));

//# sourceMappingURL=toggle_filter_checkbox.min.js.map